{% extends 'base.html' %}
{% block title %}
{{ title }}
{% endblock %}
{% block content %}
<main class="p-4 p-md-5 pt-5">
    <div id="search-items" class="row">
        {% for category in categories %}
        
            {% set cat = database.get_category_flatpaks(category) %}
            {% for app in cat %}

                {% set icon = app.get_icon() | replace('/var/lib/flatpak/appstream/flathub/x86_64/active/icons/64x64/', '/static/images/appstream/flathub/') %}
                {% set name = app.get_app_name() %}
                {% set pkg_name = app.get_name() %}
                {% set description = app.get_desc() %}
                {% if not icon %}
                {% set icon = "/static/images/flatpak_logo.png" %}
                {% endif %}
                <div class="col-xl-3 col-md-6 col-sm-12 app">
                    {%if loop.index <= 30 %}
                    <img src="{{ icon }}" class="img64" alt="application image"
                        loading="lazy">
                    {% endif %}
                    {% if loop.index > 30 %}
                    <img src="/static/images/flatpak_logo.png" data-src="{{ icon }}" class="img64 lazyload"
                        alt="application image" loading="lazy">
                    {% endif %}
                    <div class="content">
                        <h4 class="name">{{ name }}</h4>
                        <p class="description">{{ description }}</p>
                        <span class="keywords" style="display:none;">{{ pkg_name }}</span>
                    </div>
                </div>
            {% endfor %}
        {% endfor %}
    </div>
</main>
{% endblock %}